#!/bin/bash

SHELL_CONFIG="/home/kuro/.config/quickshell/ii/shell.qml"

# Check if waifu widget is commented out
if grep -q "\/\* \/\/ Waifu Slideshow Widget" "$SHELL_CONFIG"; then
    # Uncomment waifu widget
    sed -i 's/\/\* \/\/ Waifu Slideshow Widget/\/\/ Waifu Slideshow Widget/g; s/\*\/ \/\/ End Waifu Widget/\/\/ End Waifu Widget/g' "$SHELL_CONFIG"
    echo "âœ… Waifu slideshow widget enabled"
else
    # Comment out waifu widget
    sed -i 's/\/\/ Waifu Slideshow Widget/\/\* \/\/ Waifu Slideshow Widget/g; s/\/\/ End Waifu Widget/\*\/ \/\/ End Waifu Widget/g' "$SHELL_CONFIG"
    echo "âŒ Waifu slideshow widget disabled"
fi

# Restart QuickShell if running
if pgrep -f "quickshell.*ii" > /dev/null; then
    pkill -f "quickshell.*ii"
    sleep 1
    nohup quickshell -c ii > /dev/null 2>&1 &
    echo "ğŸ”„ QuickShell restarted"
fi
